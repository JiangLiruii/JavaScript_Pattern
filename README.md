## This is outline and code resource for JavaScript_Pattern book

### more detail and better format click <a href = 'https://dynalist.io/d/4z4VInYjuPQgMLhLcUUxZI1k'>here</a>
<ul><li>JavascriptPattern<ul><li><h1>Chapter1 Introduction</h1><ul><li><h2>Patterns</h2><ul><li>design pattern</li><li>coding pattern</li><li>Antipattern<ul><li>problems &gt; sloves</li></ul></li></ul></li><li><h2>JavaScript: Concepts</h2><ul><li>Object-Oriented</li><li>No Classes</li><li>Prototypes</li><li>Enviroment(browser)<ul><li>provide host object</li></ul></li></ul></li><li><h2>ECMAScript 5</h2></li><li><h2>JSLint</h2></li><li><h2>The Console</h2><ul><li>console.log</li><li>console.dir</li></ul></li></ul></li><li><h1>Chapter2 Essentials</h1><ul><li><h2>Maintainable Code</h2></li><li><h2>Minimizing Globals</h2><ul><li>problem</li><li>forget var</li><li>access to global</li><li>single var pattern</li><li>hoisting</li></ul></li><li><h2>For Loops</h2><ul><li>DOM</li><li>.length</li><li>single var pattern</li><li>++ to += 1</li></ul></li><li><h2>For-in Loops</h2><ul><li>.hasOwnProperty()</li></ul></li><li><h2>Switch Pattern</h2><ul><li>case + break</li><li>endswith default</li></ul></li><li><h2>Avoid Implied Typecasting</h2><ul><li>false === 0</li><li>'' === 0</li><li>!= and == only use to compare =null and = undefined</li><li>avoid eval<ul><li>JSON.parse()</li><li>setInterval()\setTimeout()\Function() constructor<ul><li>in Function constructor eval scope is global</li></ul></li><li>wrap eval in immediate function,avoid pollution</li></ul></li></ul></li><li><h2>Convert To Number</h2><ul><li>parseInt("08 hello")</li><li>Number("08")</li><li>+ "08"</li></ul></li><li><h2>Code Conversions</h2><ul><li>indentation<ul><li>function</li><li>loops</li><li>ifs</li><li>switches</li><li>object properties</li></ul></li><li>curly braces<ul><li>use it even only one statement of if or for</li></ul></li><li>open brace location<ul><li>same line</li></ul></li><li>white space<ul><li>white space<ul><li>after ';'<code>for (let i = 0; i &amp;lt; 10; i ++){...}</code></li><li>initial multiple variables<code>for (let i = 0, max = myarray.length; i &amp;lt; max; i ++){...}</code></li><li>after ',' in array <code>arr = [1, 2, 3]</code></li><li>after object properties<code>let o = {a: 1, b: 2}</code></li><li>function arguments<code>function(a, b, c)</code></li><li>before and after '{'<code>function foo() {...}</code></li><li>anonymous function<code>let foo = function () {}</code></li><li>operators<code>+ - * / &amp;lt; &amp;gt; &amp;lt;= &amp;gt;= === !== &amp;amp;&amp;amp; || +=</code></li><li><b>blank line</b> for seperate unite</li></ul></li></ul></li></ul></li><li><h2>Name Conventions</h2><ul><li><b>upper camel</b> constructor(able to new)<code>function MyConstructor(){...} </code></li><li><b>lower camel</b> function<code>function myFunction() {}</code></li><li><b>lowercase and underscore</b> variables <code>my_name</code></li><li><b>Capital Name</b> for constant or global  variables <code>let PI = 3.14</code></li><li><b>underscore first</b> private member <code>_getScore(){...}</code></li></ul></li><li><h2>Write Comments</h2></li><li><h2>Write API Docs</h2><ul><li>SDK(software developer kit)</li><li>YUIDoc(Yahoo!User Interface)</li><li>/<em>*</em>/</li></ul></li></ul></li><li><h1>Chapter3 Literals and Constructors</h1><ul><li><h2>Object Literal</h2><ul><li>Object literal  {} no <b>new Object(Number,String)</b></li></ul></li><li><h2>Object from a constructor</h2><ul><li>build-in(Array,Number,String)</li><li>custome constructor<ul><li>invoke with <b>new</b> </li><li>customer return value(without inheritant properties, and lose this prototype)</li></ul></li></ul></li><li><h2>Patterns for Enforcing <b>new</b> <br><code>if (this instanceof obj) {return new obj}</code></h2><ul><li>pollute global(this--&gt;global)</li><li>Self-Invoke Constructor</li></ul></li><li><h2>Array Literal</h2><ul><li>[]</li><li>new Array(.length) new Array(3) = ['undefined', 'undefined', 'undefined']</li></ul></li><li><h2>JSON</h2><ul><li>parse json: JSON.parse()</li><li>opp: JSON.stringify()</li></ul></li><li><h2>RegExp</h2><ul><li>i/g/m</li><li>/rules/igm</li></ul></li><li><h2>Primitive Wrapper</h2><ul><li>number, string, boolean, (null, undefined: without constructor)</li><li>avoid new String Number Boolean <ul><li>properties cannot augment</li><li>Error(<code>throw{name:..., message...}</code></li></ul></li></ul></li></ul></li><li><h1>Chapter4 Functions</h1><ul><li><h2>Background</h2><ul><li>Disambiguation of Teminology<ul><li>named function <code>let foo = function foo() {}</code></li><li>unnamed function<code>let foo = function () {}</code><ul><li>foo.name = ''</li></ul></li><li>function declaration<code>function foo() {}</code></li></ul></li><li>Declarations Versus Expressions: Names and Hoisting</li><li>Function's name Property</li><li>Function Hoisting<ul><li>delaration hoist both <b>name('foo')</b> and <b>implementation</b></li></ul></li></ul></li><li><h2>API Pattern</h2><ul><li>Callback Pattern<ul><li>function (callback)</li><li>scope: <code>function (callback, obj) {callback.call(obj,found)}</code></li><li>Asynchronous Event Listeners<ul><li>click, keypress, mouseover, mousemove</li></ul></li><li>Timeouts<ul><li>setTimeOut</li><li>setInterval</li></ul></li><li>Callbacks in Libraries<ul><li>focus on core functionalities</li><li>provide hooks</li></ul></li></ul></li><li>Returning Functions</li><li>Configuration Objects<ul><li>Cleaner API</li><li>no need to remember the parameters and order</li><li>skip the optional</li><li><code>let conf = {}; addPerson(conf)</code></li></ul></li><li>Curry<ul><li>Function Application<ul><li>apply/call</li></ul></li><li>Partial Application</li><li>Currying<ul><li>schonfinkelize()</li></ul></li><li>when to use<ul><li>Call same function and pass mostly the same parameters</li></ul></li></ul></li></ul></li><li><h2>Initialization Pattern</h2><ul><li>Immediate functions(IIFE Immediate-Invoke function execuate)<ul><li><code>(function (args) {}(args))</code></li><li>return value</li><li>Benifits and Usage<ul><li>wrap without global variavles</li><li>wrap individual features into modules</li></ul></li></ul></li><li>Immediate object initialization<ul><li><code>{init:function () {}}.init()</code></li><li>one-off task, or <b>return this</b></li></ul></li><li>Init-Time Branching<ul><li>test certain condition only once(browser sniffing)</li></ul></li></ul></li><li><h2>Performance patterns</h2><ul><li>Function Properties--<b>Memorization</b><ul><li>If property already exist, no need redo again</li><li>myFunc.cache = {}<ul><li><code>myFunc.cache[param]</code></li><li><code>JSON.stringify(Array.prototype.slice.call(arguments))</code></li></ul></li></ul></li><li>Self-Defining Functions<ul><li>overwrite</li><li>singleton</li></ul></li></ul></li></ul></li><li><h1>Chapter5 Object creation pattern</h1><ul><li><h2>Module Pattern</h2><ul><li>Namespace Pattern<ul><li>global cleaner</li><li><code>MYAPP.namespace('MYAPP.module1.module2')</code></li></ul></li><li>Declare dependency<ul><li>upfront the function dependencies or modules</li><li>less code when minify</li></ul></li><li>Private priorities and methods<ul><li>public<ul><li><code>{myprop: 1}</code></li><li><code>getMyprop: function () {return this.myprop}</code></li><li><code>function Gadget() {this.name = 'ipod';}</code></li></ul></li><li>private members<ul><li>wrap in function</li><li><code>var name  = 'ipod'</code></li></ul></li><li>privileged methods<ul><li><code>this.getName = function () {return this.name};</code></li></ul></li><li>privacy failures<ul><li>if reference , can be changed</li><li>solution<ul><li>make it small</li><li>extend()&amp;extendDeep()</li></ul></li></ul></li><li>object literals and privacy</li><li>prototypes and privacy<ul><li>to avoid private vars in constructor create every time</li><li>.prototype = (function () {}());</li></ul></li><li>reveal private function as public method<ul><li><code>myarray{isArray: isArray, indexOf: indexOf, inArray: indexOf}</code></li><li>to avoid unexpectd happened <ul><li>if <code>myarray.isArray = null;</code>, <code>the myarray.indexOf</code> still work</li></ul></li></ul></li></ul></li><li>modules create constructor<ul><li><code>Constr.prototype = {constructor: MYAPP.utilities.Array,}; return Constr</code></li></ul></li><li>import globals into a module<ul><li>parameters<ul><li><code>MYAPP.utilities.module = (function(myapp, global) {}(APP, this))</code></li></ul></li></ul></li></ul></li><li><h2>Sandbox Pattern</h2><ul><li>a global constructor<ul><li>new Sandbox()--&gt;new constructor--&gt;global namespace as parameter</li></ul></li><li>add modules<ul><li><code>SandBox.module.dom = function(box) {box.getElement = function () {};}</code></li></ul></li><li>implement constructor<ul><li>force new </li><li>args, callback  , modules</li><li>prototype<ul><li>name, version, getName</li></ul></li></ul></li></ul></li><li><h2>Static Members(don't change)</h2><ul><li>public <ul><li>constructor:<ul><li><code>let Gadget = function () {};</code></li></ul></li><li>static member<ul><li><code>Gadget.isShiny = function () {};</code></li><li><code>Gadget.setPrice === undefined</code></li></ul></li><li>normal method<ul><li><code>Gadget.prototype.setPrice = function (price) { this.price = price};</code></li><li><code>Gadget.prototype.isShiny = function () {return Gadget.isShiny.call(this)}</code></li></ul></li></ul></li><li>private<ul><li><code>let Gadget = (function () { let conter = 0,new Gadget; return newGadget}</code></li><li>singleton </li></ul></li></ul></li><li><h2>Object Constants</h2><ul><li>Math.PI</li><li>set(name, value)</li><li>isDefined(name)</li><li>get(name)</li></ul></li><li><h2>Chaining Pattern</h2><ul><li>return this</li><li>Pros<ul><li>less type</li><li>more specialized function</li></ul></li><li>Cons<ul><li>look up consumption</li></ul></li></ul></li><li><h2>method() Method</h2><ul><li><code>Function.prototype.method = function (name, implementation) {this.prototype[name] = implementation;return this;}</code></li></ul></li></ul></li><li><h1>Chapter6 Code Reuse Pattern</h1><ul><li><h2>inheritance</h2><ul><li>classical<ul><li>Default Pattern<ul><li><code>C.prototype = new P();</code></li><li>Cons<ul><li>add own and prototype properties</li></ul></li></ul></li><li>Rent a Constructor<ul><li><code>function Child(a, c, b, d) {Parent.apply(this, arguments)}</code></li><li>Cons<ul><li>no inherits from prototype</li></ul></li></ul></li><li>Rent and Set Prototype<ul><li><code>function Child(a, b, c, d) {Parent.apply(this, arguments);} Child.prototype = new Parent();</code></li><li>Cons<ul><li>the parent called twice,(2 same names var exist)</li></ul></li></ul></li><li>Share the Prototype<ul><li><code>function inherit(C, P) { C.prototype = P.prototype;}</code></li><li>Cons<ul><li>no Parent constructor properties</li></ul></li></ul></li><li>Temporary Constructor<ul><li><code>function inherit(C, P) {let F = function () {}; F.prototype = P.prototype; C.prototype = new F();C.uber = P.prototype; C.prototype.constructor = C}</code></li></ul></li></ul></li><li>modern<ul><li>Klass</li><li>prototypal inheritance</li><li>inheritance by coping properties</li><li>Mix-in</li><li>borrow methods<ul><li>borrow from array</li><li>borrow and bind</li><li>Function.prototype.bind()</li></ul></li></ul></li></ul></li></ul></li><li><h1>Chapter7 Design Pattern</h1><ul><li><h2>Singleton</h2><ul><li>use new</li><li>instance in static propert<br><code>function Universe() {Universe.instance = this}</code></li><li>instance in a closure <br><code>function Universe() {let instance = this; Universe = function () {return instance;}; Universe.prototype = this}</code></li></ul></li><li><h2>Factory</h2><ul><li>CarMaker example<ul><li>Parent CarMaker constructor</li><li>CarMaker.factory (static method)<br>create car object<code>CarMaker.factory = function(type)</code></li><li>special constructor<br><code>CarMaker.Compact CarMaker.SUV, CarMaker.Convertible</code></li></ul></li><li>built-in Object Factory<ul><li>new Object(), new Object(1), new Object('1'), new Object(true)</li></ul></li></ul></li><li><h2>Iterator</h2><ul><li>next</li><li>hasNext</li><li>rewind</li><li>current</li></ul></li><li><h2>Decorator</h2><ul><li>enhance plain object<br><code>let sale = new Sale(100); sale.decorate('money');</code></li><li>implementation<ul><li>single value</li><li>with a list</li></ul></li></ul></li><li><h2>Strategy</h2><ul><li>Data Validation Example</li></ul></li><li><h2>Facade</h2><ul><li><code>let myEvent = { stop: function (e) {e.stopPropogation();e.preventDefault()}}</code></li></ul></li><li><h2>Proxy</h2><ul><li>client&lt;--&gt;proxy&lt;--&gt;real object</li><li>proxy as a cache</li></ul></li><li><h2>Mediator</h2><ul><li>colleague&lt;--&gt;mediator&lt;--&gt;colleague</li><li>Example<ul><li>player 1</li><li>player2 </li><li>Scoreborad </li><li>Mediator(connect to player1 ,player2, scoreboard, keyboard)</li></ul></li><li>protect real object and loose coupling</li></ul></li><li><h2>Observe</h2><ul><li>subscriber(oberver)</li><li>publisher(subject)</li><li>magazine subscript example<ul><li>publishier<ul><li>subscribers= []</li><li>subscribe()</li><li>unsubscribe()</li><li>publish()</li></ul></li></ul></li><li>keypress game example<ul><li>publishier<ul><li>subscribers = []</li><li>on</li><li>remove</li><li>fire</li></ul></li></ul></li><li>loose coupling by notify observer</li></ul></li></ul></li><li><h1>Chapter 8 DOM and Browser Patterns</h1><ul><li><h2>Seperation Content</h2><ul><li>Content --&gt; HTML</li><li>Presentation --&gt; CSS</li><li>Behavior --&gt; JS</li></ul></li><li><h2>DOM script</h2><ul><li>DOM Access<ul><li>Avoid DOM in loops</li><li>Assigin DOM references in local</li><li>Use selectors API</li><li>Cache the length </li></ul></li><li>DOM Manipulation --&gt; fewer DOM updates<ul><li>Fragment<ul><li><code>let frag = document.createDocumentFragment();</code></li><li><code>frag.appendChild(...); </code></li><li><code>document.body.appendChild(frag)</code></li></ul></li><li>cloneNode(true)<ul><li><code>let clone = oldnode.cloneNode(true);</code><br>true means deepcopy</li><li><code>oldnode.parent.replaceChild(clone, oldnode)</code></li></ul></li></ul></li></ul></li><li><h2>Event</h2><ul><li>Event Handle<ul><li>onclick()</li><li>atachEvent()</li><li>addEventLisener()</li></ul></li><li>Event Delegate<ul><li>one event listener for many events</li></ul></li></ul></li><li><h2>Long-Running Script</h2><ul><li>setTimeout()</li><li>web worker<ul><li><code>let ww = new Worker('my_web_worker.js')</code></li><li><code>ww.onmessage = function (e) {e.data}</code></li><li><code>postMessage()</code></li></ul></li></ul></li><li><h2>Remote Scripting</h2><ul><li>XMLHttpRequest<ul><li><code>let xhr = new XMLHttpRequest();</code></li><li><code>xhr.onreadystatechange = handleResponse;</code><ul><li><code>xhr.readyState !==4 {return false}</code>(0-4 4 means completed)</li><li><code>xhr.status !== 200{return false}</code>(200 = ok 404 = not found)</li></ul></li><li>xhr.open()<ul><li>GET/POST</li><li>URL</li><li>asynchronous(true)</li></ul></li><li>xhr.send('')<ul><li>GET--&gt;""blank string</li><li>POST--&gt;data</li></ul></li></ul></li><li>JSONP(tic-tac-toe)<ul><li>response of XHR<ul><li>XML documents</li><li>HTML chunks</li><li>JSON data</li><li>Simple text file and others</li></ul></li><li>script<ul><li>script.src</li></ul></li></ul></li><li>Frame and Image Beacons<ul><li><code>new Image().src =</code>script server</li><li></li></ul></li></ul></li><li><h2>Deploy Javascript</h2><ul><li>Combine Script<ul><li>less request to make all js files to one(all.js)</li><li>2parts<ul><li>core</li><li>plugin</li></ul></li></ul></li><li>Minify and compress</li><li>Expires Header</li><li>CDN</li></ul></li><li><h2>Load Strategy</h2><ul><li>place</li><li>HTTP chunking<ul><li>http1.1 supports load page chunkly</li><li>&lt;!-- end of chunk #1 --&gt;</li></ul></li><li>dynamic<ul><li><code>let mynamespace = {inline_script: []};</code>create as early page as possible</li><li><code>mynamespace.inline_script.push(function(){});</code>when need script</li><li><code>for (){script[i]()} </code>at last to loop</li></ul></li><li>append<ul><li><code>let first_script = document.getElementsByTagName('script')</code></li><li><code>first_script.parentNode.insertBefore(script, first_script);</code></li></ul></li><li>lazy-loading<ul><li><code>window.onload = function(){}</code></li></ul></li><li>loading on demand<ul><li>require(file, callback)</li></ul></li><li>preloading JavaScript<ul><li>in IE<ul><li>IE sniffing
<p></p>
<pre><code>if (/*@cc_on@*/false)</code></pre>
<p></p></li><li>Image <code>new Image().src = "preloadme.js"</code></li></ul></li><li>other<ul><li>create object<code>let obj = document.createElement('object');</code> </li><li>add data <code>obj.data = 'preloadme.js';</code></li><li>obj.height,obj.weight = 0</li><li>append to page<code>document.body.appendChild(obj)</code></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
Edit By <a href="https://dynalist.io/d/4z4VInYjuPQgMLhLcUUxZI1k">Lorry Jiang</a><p></p>
</body></html>
